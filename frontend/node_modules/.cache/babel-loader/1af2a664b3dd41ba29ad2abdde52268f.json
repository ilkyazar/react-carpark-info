{"ast":null,"code":"var _jsxFileName = \"/home/ilkyaz/Desktop/courses/495/ispark-car-parks/frontend/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { withScriptjs, withGoogleMap, GoogleMap, Marker } from \"react-google-maps\";\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: '',\n      district: '',\n      parkID: ''\n    };\n  }\n\n  async componentDidMount() {\n    const response = await fetch('/api/data', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const body = await response.json();\n    this.setState({\n      data: body\n    });\n  }\n\n  createDistrictOptions() {\n    let districtList = [];\n\n    for (var i in this.state.data) {\n      districtList.push(this.state.data[i].Ilce);\n    }\n\n    districtList = [...new Set(districtList)];\n    console.log(districtList);\n    let uniqueDistrictOptions = [];\n\n    for (var j in districtList) {\n      uniqueDistrictOptions.push(React.createElement(\"option\", {\n        key: j,\n        value: districtList[j],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, districtList[j]));\n    }\n\n    return uniqueDistrictOptions;\n  }\n\n  createCarParkOptions() {\n    let carParkList = [];\n\n    for (var i in this.state.data) {\n      if (this.state.data[i].Ilce === this.state.district) carParkList.push(React.createElement(\"option\", {\n        key: i,\n        value: this.state.data[i].ParkID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, this.state.data[i].ParkAdi));\n    }\n\n    return carParkList;\n  }\n\n  getFreeParkingSpaces() {\n    let capacity = 0;\n\n    for (var i in this.state.data) {\n      if (this.state.data[i].ParkAdi === this.state.carpark) capacity = this.state.data[i].BosKapasite;\n    }\n\n    return capacity;\n  }\n\n  getUsedParkingSpaces() {\n    let capacity = 0;\n    let freeCapacity = 0;\n\n    for (var i in this.state.data) {\n      if (this.state.data[i].ParkAdi === this.state.carpark) {\n        freeCapacity = this.state.data[i].BosKapasite;\n        capacity = this.state.data[i].Kapasitesi;\n      }\n    }\n\n    return capacity - freeCapacity;\n  }\n\n  getLatitude() {\n    let lat = 40.96;\n\n    for (var i in this.state.data) {\n      if (this.state.data[i].parkID === this.state.parkID) {\n        lat = this.state.data[i].Latitude;\n      }\n    }\n\n    return lat;\n  }\n\n  getLongitude() {\n    let lon = 29.10;\n\n    for (var i in this.state.data) {\n      if (this.state.data[i].parkID === this.state.parkID) {\n        lon = this.state.data[i].Longitude;\n      }\n    }\n\n    return lon;\n  }\n\n  render() {\n    const CarParkLocation = withScriptjs(withGoogleMap(props => React.createElement(GoogleMap, {\n      defaultZoom: 15,\n      defaultCenter: {\n        lat: props.lat,\n        lng: props.lon\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, props.showMarker && React.createElement(Marker, {\n      position: {\n        lat: props.lat,\n        lng: props.lon\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }))));\n\n    const DistrictSelectionForm = () => React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Districts of Car Parks:\")), React.createElement(\"select\", {\n      value: this.state.district,\n      onChange: e => this.setState({\n        district: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, this.createDistrictOptions()));\n\n    const CarParkSelectionForm = () => React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"Car Parks:\")), React.createElement(\"select\", {\n      value: this.state.parkID,\n      onChange: e => this.setState({\n        parkID: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, this.createCarParkOptions()));\n\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      className: \"App-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Ispark Car Parks\"), React.createElement(DistrictSelectionForm, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), React.createElement(CarParkSelectionForm, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"Free Parking Spaces:\")), this.getFreeParkingSpaces(), React.createElement(CarParkLocation, {\n      showMarker: \"true\",\n      lon: Number(this.getLongitude()),\n      lat: Number(this.getLatitude()),\n      googleMapURL: \"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places\",\n      loadingElement: React.createElement(\"div\", {\n        style: {\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }),\n      containerElement: React.createElement(\"div\", {\n        style: {\n          height: '500px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }),\n      mapElement: React.createElement(\"div\", {\n        style: {\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/ilkyaz/Desktop/courses/495/ispark-car-parks/frontend/src/App.js"],"names":["React","Component","withScriptjs","withGoogleMap","GoogleMap","Marker","App","state","data","district","parkID","componentDidMount","response","fetch","method","headers","body","json","setState","createDistrictOptions","districtList","i","push","Ilce","Set","console","log","uniqueDistrictOptions","j","createCarParkOptions","carParkList","ParkID","ParkAdi","getFreeParkingSpaces","capacity","carpark","BosKapasite","getUsedParkingSpaces","freeCapacity","Kapasitesi","getLatitude","lat","Latitude","getLongitude","lon","Longitude","render","CarParkLocation","props","lng","showMarker","DistrictSelectionForm","e","target","value","CarParkSelectionForm","Number","height"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport { withScriptjs, withGoogleMap, GoogleMap, Marker } from \"react-google-maps\"\n\nclass App extends Component {\n  state = {\n    data: '',\n    district: '',\n    parkID: ''\n  };\n\n  async componentDidMount() {\n    const response = await fetch('/api/data', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      }\n    });\n\n    const body = await response.json();\n\n    this.setState({ data: body });\n  }\n\n  createDistrictOptions() {\n    let districtList = [];\n\n    for (var i in this.state.data) {\n      districtList.push(this.state.data[i].Ilce);\n    }\n\n    districtList = [...new Set(districtList)];\n\n    console.log(districtList);\n\n    let uniqueDistrictOptions = [];\n\n    for (var j in districtList) {\n      uniqueDistrictOptions.push(<option key={j} value={districtList[j]}>{districtList[j]}</option>)\n    }\n\n    return uniqueDistrictOptions;\n  }\n\n  createCarParkOptions() {\n    let carParkList = [];\n\n    for (var i in this.state.data) {\n      if (this.state.data[i].Ilce === this.state.district)\n        carParkList.push(<option key={i} value={this.state.data[i].ParkID}>{this.state.data[i].ParkAdi}</option>)\n    }\n\n    return carParkList;\n  }\n\n  getFreeParkingSpaces() {\n    let capacity = 0;\n\n    for (var i in this.state.data) {\n\n      if (this.state.data[i].ParkAdi === this.state.carpark)\n        capacity = this.state.data[i].BosKapasite;\n    }\n\n    return capacity;\n  }\n\n  getUsedParkingSpaces() {\n    let capacity = 0;\n    let freeCapacity = 0;\n\n    for (var i in this.state.data) {\n\n      if (this.state.data[i].ParkAdi === this.state.carpark) {\n        freeCapacity = this.state.data[i].BosKapasite;\n        capacity = this.state.data[i].Kapasitesi;\n      }\n    }\n\n    return capacity - freeCapacity;\n  }\n\n  getLatitude() {\n    let lat = 40.96;\n\n    for (var i in this.state.data) {\n\n      if (this.state.data[i].parkID === this.state.parkID) {\n        lat = this.state.data[i].Latitude;\n      }\n    }\n\n    return lat;\n  }\n\n  getLongitude() {\n    let lon = 29.10;\n\n    for (var i in this.state.data) {\n\n      if (this.state.data[i].parkID === this.state.parkID) {\n        lon = this.state.data[i].Longitude;\n      }\n    }\n\n    return lon;\n\n  }\n\n  render() {\n    const CarParkLocation = withScriptjs(withGoogleMap((props) =>\n      <GoogleMap\n        defaultZoom={ 15 }\n        defaultCenter={{ lat: props.lat, lng: props.lon }}\n      >\n        { props.showMarker && \n          <Marker position={{ lat: props.lat, lng: props.lon }} />\n        }\n      </GoogleMap>\n    ))\n\n    const DistrictSelectionForm = () =>\n        <form>\n            <p>\n              <strong>Districts of Car Parks:</strong>\n            </p>\n            <select\n              value={this.state.district}\n              onChange={e => this.setState({ district: e.target.value })}>\n                  {this.createDistrictOptions()}\n            </select>\n            \n        </form>\n\n    const CarParkSelectionForm = () => \n        <form>\n            <p>\n              <strong>Car Parks:</strong>\n            </p>\n            <select\n              value={this.state.parkID}\n              onChange={e => this.setState({ parkID: e.target.value })}>\n                  {this.createCarParkOptions()}\n            </select>\n            \n        </form>\n\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          Ispark Car Parks\n        </header>\n\n        <DistrictSelectionForm/>\n\n        <CarParkSelectionForm/>\n\n        <p>\n          <strong>Free Parking Spaces:</strong>\n        </p>\n\n        {this.getFreeParkingSpaces()}\n\n        <CarParkLocation\n          showMarker=\"true\"\n          lon={Number(this.getLongitude())}\n          lat={Number(this.getLatitude())}\n          googleMapURL=\"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places\"\n          loadingElement={<div style={{ height: '100%' }} />}\n          containerElement={<div style={{ height: '500px' }} />}\n          mapElement={<div style={{ height: '100%' }} />}\n        />\n      \n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}